{"ast":null,"code":"import _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/evert/eeZIPEEzii/frontend/eezipeezii/src/pages/Login.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"\\n    mutation LogIn($email: String!, $password: String!) {\\n      login(email: $email, password: $password) {\\n        _id\\n        email\\n        jwt\\n      }\\n    }\\n  \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Container, Button, Content, Form, Item, Input, Text } from 'native-base';\nimport { graphql } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport \"apollo-client\";\nimport \"graphql\";\n\nvar Login = function (_React$Component) {\n  _inherits(Login, _React$Component);\n\n  var _super = _createSuper(Login);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _super.call(this, props);\n\n    _this.handleInputChange = function (field, value) {\n      var newState = _objectSpread(_objectSpread({}, _this.state), {}, _defineProperty({}, field, value));\n\n      _this.setState(newState);\n    };\n\n    _this.handleSubmit = function () {\n      var _this$state = _this.state,\n          email = _this$state.email,\n          password = _this$state.password;\n\n      if (email.length === 0) {\n        return _this.setState({\n          emailError: true\n        });\n      }\n\n      _this.setState({\n        emailError: false\n      });\n\n      if (password.length === 0) {\n        return _this.setState({\n          passwordError: true\n        });\n      }\n\n      _this.setState({\n        passwordError: false\n      });\n\n      _this.props.login(email, password).then(function (_ref) {\n        var data = _ref.data;\n        return _this.props.screenProps.changeLoginState(true, data.login.jwt);\n      }).catch(function (e) {\n        if (/email/i.test(e.message)) {\n          _this.setState({\n            emailError: true\n          });\n        }\n\n        if (/password/i.test(e.message)) {\n          _this.setState({\n            passwordError: true\n          });\n        }\n      });\n    };\n\n    _this.state = {\n      email: '',\n      emailError: false,\n      password: '',\n      passwordError: false\n    };\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          emailError = _this$state2.emailError,\n          passwordError = _this$state2.passwordError;\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 7\n        }\n      }, React.createElement(Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 9\n        }\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }\n      }, React.createElement(Item, {\n        error: emailError,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Email\",\n        onChangeText: function onChangeText(value) {\n          return _this2.handleInputChange('email', value);\n        },\n        keyboardType: \"email-address\",\n        autoCapitalize: \"none\",\n        autoCorrect: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 15\n        }\n      })), React.createElement(Item, {\n        error: passwordError,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Password\",\n        onChangeText: function onChangeText(value) {\n          return _this2.handleInputChange('password', value);\n        },\n        autoCapitalize: \"none\",\n        autoCorrect: false,\n        secureTextEntry: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }\n      }))), React.createElement(Button, {\n        full: true,\n        onPress: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }\n      }, \"Sign In\"))));\n    }\n  }]);\n\n  return Login;\n}(React.Component);\n\nexport default graphql(gql(_templateObject()), {\n  props: function props(_ref2) {\n    var mutate = _ref2.mutate;\n    return {\n      login: function login(email, password) {\n        return mutate({\n          variables: {\n            email: email,\n            password: password\n          }\n        });\n      }\n    };\n  }\n})(Login);","map":{"version":3,"sources":["/home/evert/eeZIPEEzii/frontend/eezipeezii/src/pages/Login.js"],"names":["React","Container","Button","Content","Form","Item","Input","Text","graphql","gql","Login","props","handleInputChange","field","value","newState","state","setState","handleSubmit","email","password","length","emailError","passwordError","login","then","data","screenProps","changeLoginState","jwt","catch","e","test","message","Component","mutate","variables"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Container, Button, Content, Form, Item, Input, Text } from 'native-base';\nimport { graphql } from 'react-apollo';\nimport gql from 'graphql-tag';\n\nimport \"apollo-client\";\nimport \"graphql\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: '',\n      emailError: false,\n      password: '',\n      passwordError: false,\n    };\n  }\n\n  handleInputChange = (field, value) => {\n    const newState = {\n      ...this.state,\n      [field]: value,\n    };\n    this.setState(newState);\n  };\n\n  handleSubmit = () => {\n    const { email, password } = this.state;\n    if (email.length === 0) {\n      return this.setState({ emailError: true });\n    }\n    this.setState({ emailError: false });\n\n    if (password.length === 0) {\n      return this.setState({ passwordError: true });\n    }\n    this.setState({ passwordError: false });\n\n    this.props\n      .login(email, password)\n      .then(({ data }) => {\n        return this.props.screenProps.changeLoginState(true, data.login.jwt);\n      })\n      .catch(e => {\n        // If the error message contains email or password we'll assume that's the error.\n        if (/email/i.test(e.message)) {\n          this.setState({ emailError: true });\n        }\n        if (/password/i.test(e.message)) {\n          this.setState({ passwordError: true });\n        }\n      });\n  };\n\n  render() {\n    const { emailError, passwordError } = this.state;\n\n    return (\n      <Container>\n        <Content>\n          <Form>\n            <Item error={emailError}>\n              <Input\n                placeholder=\"Email\"\n                onChangeText={value => this.handleInputChange('email', value)}\n                keyboardType=\"email-address\"\n                autoCapitalize=\"none\"\n                autoCorrect={false}\n              />\n            </Item>\n            <Item error={passwordError}>\n              <Input\n                placeholder=\"Password\"\n                onChangeText={value => this.handleInputChange('password', value)}\n                autoCapitalize=\"none\"\n                autoCorrect={false}\n                secureTextEntry\n              />\n            </Item>\n          </Form>\n          <Button full onPress={this.handleSubmit}>\n            <Text>Sign In</Text>\n          </Button>\n        </Content>\n      </Container>\n    );\n  }\n}\n\nexport default graphql(\n  gql`\n    mutation LogIn($email: String!, $password: String!) {\n      login(email: $email, password: $password) {\n        _id\n        email\n        jwt\n      }\n    }\n  `,\n  {\n    props: ({ mutate }) => ({\n      login: (email, password) => mutate({ variables: { email, password } }),\n    }),\n  },\n)(Login);"]},"metadata":{},"sourceType":"module"}