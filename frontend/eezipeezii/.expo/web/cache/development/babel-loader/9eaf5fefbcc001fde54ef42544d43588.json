{"ast":null,"code":"import _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/evert/eeZIPEEzii/frontend/eezipeezii/src/pages/Register.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"\\n    mutation SignUp($email: String!, $password: String!) {\\n      signup(email: $email, password: $password) {\\n        _id\\n        email\\n        jwt\\n      }\\n    }\\n  \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Container, Button, Content, Form, Item, Input, Text } from 'native-base';\nimport { graphql } from 'react-apollo';\nimport gql from 'graphql-tag';\n\nvar Register = function (_React$Component) {\n  _inherits(Register, _React$Component);\n\n  var _super = _createSuper(Register);\n\n  function Register(props) {\n    var _this;\n\n    _classCallCheck(this, Register);\n\n    _this = _super.call(this, props);\n\n    _this.handleInputChange = function (field, value) {\n      var newState = _objectSpread(_objectSpread({}, _this.state), {}, _defineProperty({}, field, value));\n\n      _this.setState(newState);\n    };\n\n    _this.handleSubmit = function () {\n      var _this$state = _this.state,\n          email = _this$state.email,\n          password = _this$state.password,\n          confirmPassword = _this$state.confirmPassword;\n\n      if (email.length === 0) {\n        return _this.setState({\n          emailError: true\n        });\n      }\n\n      _this.setState({\n        emailError: false\n      });\n\n      if (password.length === 0) {\n        return _this.setState({\n          passwordError: true\n        });\n      }\n\n      _this.setState({\n        passwordError: false\n      });\n\n      if (confirmPassword.length === 0) {\n        return _this.setState({\n          confirmPasswordError: true\n        });\n      }\n\n      _this.setState({\n        confirmPasswordError: false\n      });\n\n      if (password !== confirmPassword) {\n        return _this.setState({\n          passwordError: true,\n          confirmPasswordError: true\n        });\n      }\n\n      _this.setState({\n        passwordError: false,\n        confirmPasswordError: false\n      });\n\n      _this.props.signup(email, password).then(function (_ref) {\n        var data = _ref.data;\n        return _this.props.screenProps.changeLoginState(true, data.signup.jwt);\n      }).catch(function (e) {\n        if (/email/i.test(e.message)) {\n          _this.setState({\n            emailError: true\n          });\n        }\n\n        if (/password/i.test(e.message)) {\n          _this.setState({\n            passwordError: true\n          });\n        }\n      });\n    };\n\n    _this.state = {\n      email: '',\n      emailError: false,\n      password: '',\n      passwordError: false,\n      confirmPassword: '',\n      confirmPasswordError: false\n    };\n    return _this;\n  }\n\n  _createClass(Register, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var navigation = this.props.navigation;\n      var _this$state2 = this.state,\n          emailError = _this$state2.emailError,\n          passwordError = _this$state2.passwordError,\n          confirmPasswordError = _this$state2.confirmPasswordError;\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 7\n        }\n      }, React.createElement(Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 9\n        }\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }\n      }, React.createElement(Item, {\n        error: emailError,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Email\",\n        onChangeText: function onChangeText(value) {\n          return _this2.handleInputChange('email', value);\n        },\n        keyboardType: \"email-address\",\n        autoCapitalize: \"none\",\n        autoCorrect: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }\n      })), React.createElement(Item, {\n        error: passwordError,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Password\",\n        onChangeText: function onChangeText(value) {\n          return _this2.handleInputChange('password', value);\n        },\n        autoCapitalize: \"none\",\n        autoCorrect: false,\n        secureTextEntry: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }\n      })), React.createElement(Item, {\n        last: true,\n        error: confirmPasswordError,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Confirm Password\",\n        onChangeText: function onChangeText(value) {\n          return _this2.handleInputChange('confirmPassword', value);\n        },\n        autoCapitalize: \"none\",\n        autoCorrect: false,\n        secureTextEntry: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }\n      }))), React.createElement(Button, {\n        full: true,\n        onPress: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }\n      }, \"Sign Up\")), React.createElement(Button, {\n        full: true,\n        transparent: true,\n        onPress: function onPress() {\n          return navigation.navigate('Login');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }\n      }, \"Sign In\"))));\n    }\n  }]);\n\n  return Register;\n}(React.Component);\n\nexport default graphql(gql(_templateObject()), {\n  props: function props(_ref2) {\n    var mutate = _ref2.mutate;\n    return {\n      signup: function signup(email, password) {\n        return mutate({\n          variables: {\n            email: email,\n            password: password\n          }\n        });\n      }\n    };\n  }\n})(Register);","map":{"version":3,"sources":["/home/evert/eeZIPEEzii/frontend/eezipeezii/src/pages/Register.js"],"names":["React","Container","Button","Content","Form","Item","Input","Text","graphql","gql","Register","props","handleInputChange","field","value","newState","state","setState","handleSubmit","email","password","confirmPassword","length","emailError","passwordError","confirmPasswordError","signup","then","data","screenProps","changeLoginState","jwt","catch","e","test","message","navigation","navigate","Component","mutate","variables"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Container, Button, Content, Form, Item, Input, Text } from 'native-base';\nimport { graphql } from 'react-apollo';\nimport gql from 'graphql-tag';\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: '',\n      emailError: false,\n      password: '',\n      passwordError: false,\n      confirmPassword: '',\n      confirmPasswordError: false,\n    };\n  }\n\n  handleInputChange = (field, value) => {\n    const newState = {\n      ...this.state,\n      [field]: value,\n    };\n    this.setState(newState);\n  };\n\n  handleSubmit = () => {\n    const { email, password, confirmPassword } = this.state;\n    if (email.length === 0) {\n      return this.setState({ emailError: true });\n    }\n    this.setState({ emailError: false });\n\n    if (password.length === 0) {\n      return this.setState({ passwordError: true });\n    }\n    this.setState({ passwordError: false });\n\n    if (confirmPassword.length === 0) {\n      return this.setState({ confirmPasswordError: true });\n    }\n    this.setState({ confirmPasswordError: false });\n\n    if (password !== confirmPassword) {\n      return this.setState({ passwordError: true, confirmPasswordError: true });\n    }\n    this.setState({ passwordError: false, confirmPasswordError: false });\n\n    this.props\n      .signup(email, password)\n      .then(({ data }) => {\n        return this.props.screenProps.changeLoginState(true, data.signup.jwt);\n      })\n      .catch(e => {\n        // If the error message contains email or password we'll assume that's the error.\n        if (/email/i.test(e.message)) {\n          this.setState({ emailError: true });\n        }\n        if (/password/i.test(e.message)) {\n          this.setState({ passwordError: true });\n        }\n      });\n  };\n\n  render() {\n    const { navigation } = this.props;\n    const { emailError, passwordError, confirmPasswordError } = this.state;\n\n    return (\n      <Container>\n        <Content>\n          <Form>\n            <Item error={emailError}>\n              <Input\n                placeholder=\"Email\"\n                onChangeText={value => this.handleInputChange('email', value)}\n                keyboardType=\"email-address\"\n                autoCapitalize=\"none\"\n                autoCorrect={false}\n              />\n            </Item>\n            <Item error={passwordError}>\n              <Input\n                placeholder=\"Password\"\n                onChangeText={value => this.handleInputChange('password', value)}\n                autoCapitalize=\"none\"\n                autoCorrect={false}\n                secureTextEntry\n              />\n            </Item>\n            <Item last error={confirmPasswordError}>\n              <Input\n                placeholder=\"Confirm Password\"\n                onChangeText={value => this.handleInputChange('confirmPassword', value)}\n                autoCapitalize=\"none\"\n                autoCorrect={false}\n                secureTextEntry\n              />\n            </Item>\n          </Form>\n          <Button full onPress={this.handleSubmit}>\n            <Text>Sign Up</Text>\n          </Button>\n          <Button full transparent onPress={() => navigation.navigate('Login')}>\n            <Text>Sign In</Text>\n          </Button>\n        </Content>\n      </Container>\n    );\n  }\n}\n\nexport default graphql(\n  gql`\n    mutation SignUp($email: String!, $password: String!) {\n      signup(email: $email, password: $password) {\n        _id\n        email\n        jwt\n      }\n    }\n  `,\n  {\n    props: ({ mutate }) => ({\n      signup: (email, password) => mutate({ variables: { email, password } }),\n    }),\n  },\n)(Register);\n"]},"metadata":{},"sourceType":"module"}